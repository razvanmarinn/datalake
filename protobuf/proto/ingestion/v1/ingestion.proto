syntax = "proto3";
package ingestion.v1;

option go_package = "github.com/razvanmarinn/datalake/protobuf/gen/go/ingestion/v1;ingestionv1";

service IngestionService {
    rpc UploadBatch(stream UploadBatchRequest) returns (UploadBatchResponse);
}

message UploadBatchRequest {
    oneof data {
        BatchHeader header = 1;
        bytes chunk = 2;
    }
}

message BatchHeader {
    string project_id = 1;
    string format = 2; // "AVRO", "PARQUET"
}

message UploadBatchResponse {
    bool success = 1;
    int64 rows_processed = 2;
}
